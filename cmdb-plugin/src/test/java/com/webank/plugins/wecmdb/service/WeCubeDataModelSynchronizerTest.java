package com.webank.plugins.wecmdb.service;

import com.webank.cmdb.controller.AbstractBaseControllerTest;
import org.junit.Ignore;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.test.context.support.WithMockUser;
import org.springframework.test.context.TestPropertySource;

@TestPropertySource(properties="plugins.gateway-url=http://81.71.133.151:19090/")
@Ignore("Actually a integration test requiring WeCube platform")
public class WeCubeDataModelSynchronizerTest extends AbstractBaseControllerTest {
    @Autowired
    WeCubeDataModelSynchronizer weCubeDataModelSynchronizer;

    @Test
    @WithMockUser(
            username = "mockUser",
            password = "Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ1bWFkbWluIiwiaWF0IjoxNjA2Mzg5MDM1LCJ0eXBlIjoiYWNjZXNzVG9rZW4iLCJjbGllbnRUeXBlIjoiVVNFUiIsImV4cCI6MTYwNjM5MDIzNSwiYXV0aG9yaXR5IjoiW1NVUEVSX0FETUlOLElNUExFTUVOVEFUSU9OX1dPUktGTE9XX0VYRUNVVElPTixJTVBMRU1FTlRBVElPTl9CQVRDSF9FWEVDVVRJT04sSU1QTEVNRU5UQVRJT05fQVJUSUZBQ1RfTUFOQUdFTUVOVCxNT05JVE9SX01BSU5fREFTSEJPQVJELE1PTklUT1JfTUVUUklDX0NPTkZJRyxNT05JVE9SX0NVU1RPTV9EQVNIQk9BUkQsTU9OSVRPUl9BTEFSTV9DT05GSUcsTU9OSVRPUl9BTEFSTV9NQU5BR0VNRU5ULENPTExBQk9SQVRJT05fUExVR0lOX01BTkFHRU1FTlQsQ09MTEFCT1JBVElPTl9XT1JLRkxPV19PUkNIRVNUUkFUSU9OLEFETUlOX1NZU1RFTV9QQVJBTVMsQURNSU5fUkVTT1VSQ0VTX01BTkFHRU1FTlQsQURNSU5fVVNFUl9ST0xFX01BTkFHRU1FTlQsQURNSU5fQ01EQl9NT0RFTF9NQU5BR0VNRU5ULENNREJfQURNSU5fQkFTRV9EQVRBX01BTkFHRU1FTlQsQURNSU5fUVVFUllfTE9HLE1FTlVfQURNSU5fUEVSTUlTU0lPTl9NQU5BR0VNRU5ULE1FTlVfQVBQTElDQVRJT05fQVJDSElURUNUVVJFX0RFU0lHTixNRU5VX0lEQ19QTEFOTklOR19ERVNJR04sTUVOVV9ERVNJR05JTkdfQ0lfREFUQV9FTlFVSVJZLE1FTlVfQURNSU5fUVVFUllfTE9HLE1FTlVfQVBQTElDQVRJT05fREVQTE9ZTUVOVF9ERVNJR04sTUVOVV9BRE1JTl9DTURCX01PREVMX01BTkFHRU1FTlQsTUVOVV9BUFBMSUNBVElPTl9BUkNISVRFQ1RVUkVfUVVFUlksTUVOVV9JRENfUkVTT1VSQ0VfUExBTk5JTkcsTUVOVV9ERVNJR05JTkdfQ0lfREFUQV9NQU5BR0VNRU5ULE1FTlVfREVTSUdOSU5HX0NJX0lOVEVHUkFURURfUVVFUllfTUFOQUdFTUVOVCxNRU5VX0RFU0lHTklOR19DSV9JTlRFR1JBVEVEX1FVRVJZX0VYRUNVVElPTixNRU5VX0NNREJfQURNSU5fQkFTRV9EQVRBX01BTkFHRU1FTlRdIn0.hSp9hvPGfxsRsOR1h7Ivr8W7dBhdNJHABSpCmTHjCa5Gg761mXbgWPrXUAsxcuurfJePDUR1QVa1skFQZsZ0KA"
    )
    public void test() {
        weCubeDataModelSynchronizer.synchronize().block();
    }
}
